<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bill - {{billNumber}}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="font-sans text-sm text-gray-800 leading-relaxed">
  <div class="container mx-auto max-w-4xl p-5">
    <!-- Header -->
    <div class="header bg-gradient-to-tr from-blue-900 to-blue-400 text-white rounded-t-lg -mx-5 px-5 py-5 mb-5">
      <div class="header-content flex justify-between items-center gap-5">
        <div class="hospital-logo flex-shrink-0">
          {{#if logoUrl}}
          <img src="{{logoUrl}}" alt="Hospital Logo" class="h-20 object-contain" />
          {{/if}}
        </div>
        <div class="hospital-details text-right text-sm leading-normal">
          {{#if hospital.name}}
          <div class="hospital-name text-2xl font-bold mb-2">{{hospital.name}}</div>
          {{/if}}
          {{#if hospital.address}}
          <div class="mb-1">{{hospital.address}}</div>
          {{/if}}
          {{#if hospital.phone}}
          <div>Phone: {{hospital.phone}}</div>
          {{/if}}
        </div>
      </div>
    </div>

    <!-- Bill Details Section -->
    <div class="bill-details bg-gray-50 rounded-md p-4 mb-6 text-gray-900">
      <div class="bill-details-grid grid grid-cols-3 gap-5">
        <div class="bill-detail-item flex flex-col gap-1">
          <span>{{billNumber}}</span>
        </div>
        <div class="bill-detail-item flex flex-col gap-1">
          <span class="bill-detail-label font-semibold text-gray-600">Date</span>
          <span>{{formatDate billDate}}</span>
        </div>
        <div class="bill-detail-item flex flex-col gap-1">
          <span class="bill-detail-label font-semibold text-gray-600">Status</span>
          <span class="status {{statusClass status}} font-bold text-xs rounded px-2 py-1">
            {{replace status "_" " "}}
          </span>
        </div>
      </div>
    </div>

    <!-- Patient Information -->
    <div class="section mb-1">
      <div class="section-title text-blue-900 font-bold text-lg border-b-2 border-gray-300 pb-1 mb-1">PATIENT INFORMATION</div>
      <div class="patient-info grid grid-cols-2 gap-1 bg-gray-50 p-1 rounded-md">
        <div>
          <div class="info-item flex mb-2">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Patient Name:</span>
            <span class="info-value text-gray-900">{{patient.name}}</span>
          </div>
          <div class="info-item flex mb-1">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Patient ID:</span>
            <span class="info-value text-gray-900">{{patient.patientUniqueId}}</span>
          </div>
          <div class="info-item flex">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Phone:</span>
            <span class="info-value text-gray-900">{{patient.phone}}</span>
          </div>
        </div>
        <div>
          <div class="info-item flex mb-1">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Email:</span>
            <span class="info-value text-gray-900">{{patient.email}}</span>
          </div>
          <div class="info-item flex mb-1">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Due Date:</span>
            <span class="info-value text-gray-900">{{formatDate dueDate}}</span>
          </div>
          <div class="info-item flex">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Created:</span>
            <span class="info-value text-gray-900">{{formatDate createdAt}}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Bill Items -->
    <div class="section mb-2">
      <div class="section-title text-blue-900 font-bold text-lg border-b-2 border-gray-300 pb-1 mb-1">BILL ITEMS</div>
      <table class="items-table w-full border-collapse shadow-sm">
        <thead>
          <tr class="bg-gray-100 border-b border-gray-300 text-xs font-semibold text-left">
            <th class="py-1 px-2">S.No</th>
            <th class="py-1 px-2">Description</th>
            <th class="py-1 px-2">Qty</th>
            <th class="py-1 px-2">Unit Price</th>
            <th class="py-1 px-2">Discount</th>
            <th class="py-1 px-2">Total</th>
          </tr>
        </thead>
        <tbody>
          {{#each billItems}}
          <tr class="even:bg-gray-50 hover:bg-gray-100 text-xs">
            <td class="py-1 px-2">{{inc @index}}</td>
            <td class="py-1 px-2">{{description}}</td>
            <td class="py-1 px-2">{{quantity}}</td>
            <td class="py-1 px-2">₹{{formatCurrency unitPrice}}</td>
            <td class="py-1 px-2">₹{{formatCurrency discountAmount}}</td>
            <td class="py-1 px-2">₹{{formatCurrency totalPrice}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    <!-- Payment Summary -->
    <div class="section mb-6">
      <div class="section-title text-blue-900 font-bold text-lg border-b-2 border-gray-300 pb-1 mb-1">PAYMENT SUMMARY</div>
      <div class="payment-summary bg-gray-50 rounded-md p-1 w-full max-w-full">
        <div class="summary-item flex justify-between">
          <span>Total Amount:</span>
          <span>₹{{formatCurrency totalAmount}}</span>
        </div>
        <div class="summary-item flex justify-between ">
          <span>Amount Paid:</span>
          <span>₹{{formatCurrency paidAmount}}</span>
        </div>
        <div class="summary-item flex justify-between">
          <span>Amount Due:</span>
          <span>₹{{formatCurrency dueAmount}}</span>
        </div>
        <div class="summary-item total flex justify-between border-t-2 border-gray-300 pt-1 font-bold text-base">
          <span>Status:</span>
          <span class="status {{statusClass status}} font-bold text-xs rounded px-2 py-1">
            {{replace status "_" " "}}
          </span>
        </div>
      </div>
    </div>

    <!-- Payment History -->
    {{#if payments.length}}
    <div class="section payment-history mb-2">
      <div class="section-title text-blue-900 font-bold text-lg border-b-2 border-gray-300 pb-1 mb-1">PAYMENT HISTORY</div>
      <table class="items-table w-full border-collapse shadow-sm">
        <thead>
          <tr class="bg-gray-100 border-b border-gray-300 text-xs font-semibold text-left">
            <th class="py-1 px-2">Date</th>
            <th class="py-1 px-2">Amount</th>
            <th class="py-1 px-2">Method</th>
            <th class="py-1 px-2">Status</th>
          </tr>
        </thead>
        <tbody>
          {{#each payments}}
          <tr class="even:bg-gray-50 hover:bg-gray-100 text-xs">
            <td class="py-1 px-2">{{formatDate paymentDate}}</td>
            <td class="py-1 px-2">₹{{formatCurrency amount}}</td>
            <td class="py-1 px-2">{{replace paymentMethod "_" " "}}</td>
            <td class="py-1 px-2">{{replace status "_" " "}}</td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    {{/if}}

    <!-- Notes -->
    {{#if notes}}
    <div class="section mb-6">
      <div class="section-title text-blue-900 font-bold text-lg border-b-2 border-gray-300 pb-1 mb-4">NOTES</div>
      <div class="notes-section bg-gray-50 p-4 rounded-md border-l-4 border-yellow-300">
        {{notes}}
      </div>
    </div>
    {{/if}}

    <!-- Footer -->
    <div class="footer mt-8 pt-6 border-t-2 border-gray-300 text-gray-500 text-xs">
      <div class="footer-content flex justify-between items-center">
        <div>
          <div>Generated on: {{formatDateTime currentDate}}</div>
          <div>Hospital: {{hospital.name}}</div>
          {{#if hospital.address}}
          <div>Address: {{hospital.address}}</div>
          {{/if}}
        </div>
        <div class="signature text-right">
          <div>Authorized Signature</div>
          <div class="signature-line border-b border-gray-400 w-[150px] mt-2 mx-auto"></div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
