<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bill - {{billNumber}}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="font-sans text-sm text-gray-800 leading-relaxed">
  <div class="container mx-auto max-w-4xl p-8 bg-white shadow-xl rounded-lg my-8">
    <div class="header bg-gradient-to-tr from-blue-900 to-blue-400 text-white rounded-t-lg -mx-8 px-8 py-6 mb-8">
      <div class="header-content flex justify-between items-center gap-5">
        <div class="hospital-logo flex-shrink-0">
          {{#if logoUrl}}
          <img src="{{logoUrl}}" alt="Hospital Logo" class="h-20 object-contain" />
          {{/if}}
        </div>
        <div class="hospital-details text-right text-sm leading-normal">
          {{#if hospital.name}}
          <div class="hospital-name text-3xl font-bold mb-2">{{hospital.name}}</div>
          {{/if}}
          {{#if hospital.address}}
          <div class="mb-1">{{hospital.address}}</div>
          {{/if}}
          {{#if hospital.phone}}
          <div>Phone: {{hospital.phone}}</div>
          {{/if}}
        </div>
      </div>
    </div>

    <div class="bill-details bg-gray-50 rounded-md p-6 mb-8 text-gray-900 border-l-4 border-blue-500">
      <div class="bill-details-grid grid grid-cols-1 md:grid-cols-3 gap-5">
        <div class="bill-detail-item flex flex-col gap-1">
          <span class="bill-detail-label font-semibold text-gray-600">Bill Number</span>
          <span class="text-lg font-bold text-gray-900">{{billNumber}}</span>
        </div>
        <div class="bill-detail-item flex flex-col gap-1">
          <span class="bill-detail-label font-semibold text-gray-600">Date</span>
          <span class="text-lg font-bold text-gray-900">{{formatDate billDate}}</span>
        </div>
        <div class="bill-detail-item flex flex-col gap-1">
          <span class="bill-detail-label font-semibold text-gray-600">Status</span>
          <span class="status {{statusClass status}} font-bold text-xs rounded-full px-3 py-1 uppercase text-white w-fit mt-1">
            {{replace status "_" " "}}
          </span>
        </div>
      </div>
    </div>

    <div class="section mb-8">
      <div class="section-title text-blue-900 font-bold text-xl border-b-2 border-gray-300 pb-2 mb-4">PATIENT INFORMATION</div>
      <div class="patient-info grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 bg-gray-50 p-6 rounded-md border">
        <div>
          <div class="info-item flex flex-col sm:flex-row mb-2">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Patient Name:</span>
            <span class="info-value text-gray-900">{{patient.name}}</span>
          </div>
          <div class="info-item flex flex-col sm:flex-row mb-2">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Patient ID:</span>
            <span class="info-value text-gray-900">{{patient.patientUniqueId}}</span>
          </div>
          <div class="info-item flex flex-col sm:flex-row">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Phone:</span>
            <span class="info-value text-gray-900">{{patient.phone}}</span>
          </div>
        </div>
        <div>
          <div class="info-item flex flex-col sm:flex-row mb-2">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Email:</span>
            <span class="info-value text-gray-900">{{patient.email}}</span>
          </div>
          <div class="info-item flex flex-col sm:flex-row mb-2">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Due Date:</span>
            <span class="info-value text-gray-900">{{formatDate dueDate}}</span>
          </div>
          <div class="info-item flex flex-col sm:flex-row">
            <span class="info-label font-semibold min-w-[120px] text-gray-700">Created:</span>
            <span class="info-value text-gray-900">{{formatDate createdAt}}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="section mb-8">
      <div class="section-title text-blue-900 font-bold text-xl border-b-2 border-gray-300 pb-2 mb-4">BILL ITEMS</div>
      <div class="overflow-x-auto">
        <table class="items-table w-full border-collapse rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-gray-100 border-b border-gray-300 text-xs font-semibold text-left text-gray-700">
              <th class="py-3 px-4">S.No</th>
              <th class="py-3 px-4">Description</th>
              <th class="py-3 px-4">Qty</th>
              <th class="py-3 px-4">Unit Price</th>
              <th class="py-3 px-4">Discount</th>
              <th class="py-3 px-4 text-right">Total</th>
            </tr>
          </thead>
          <tbody>
            {{#each billItems}}
            <tr class="even:bg-gray-50 hover:bg-gray-100 text-xs border-b border-gray-200">
              <td class="py-2 px-4">{{inc @index}}</td>
              <td class="py-2 px-4">{{description}}</td>
              <td class="py-2 px-4">{{quantity}}</td>
              <td class="py-2 px-4">₹{{formatCurrency unitPrice}}</td>
              <td class="py-2 px-4">₹{{formatCurrency discountAmount}}</td>
              <td class="py-2 px-4 text-right">₹{{formatCurrency totalPrice}}</td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>

    <div class="section mb-8">
      <div class="section-title text-blue-900 font-bold text-xl border-b-2 border-gray-300 pb-2 mb-4">PAYMENT SUMMARY</div>
      <div class="payment-summary bg-gray-50 rounded-md p-6 w-full md:w-1/2 ml-auto border">
        <div class="summary-item flex justify-between mb-2">
          <span class="text-gray-700">Total Amount:</span>
          <span class="font-bold text-gray-900">₹{{formatCurrency totalAmount}}</span>
        </div>
        <div class="summary-item flex justify-between mb-2">
          <span class="text-gray-700">Amount Paid:</span>
          <span class="font-bold text-green-600">₹{{formatCurrency paidAmount}}</span>
        </div>
        <div class="summary-item flex justify-between pb-2 mb-2 border-b-2 border-gray-300">
          <span class="text-gray-700">Amount Due:</span>
          <span class="font-bold text-red-600">₹{{formatCurrency dueAmount}}</span>
        </div>
        <div class="summary-item total flex justify-between font-bold text-lg text-blue-900">
          <span>Status:</span>
          <span class="status {{statusClass status}} font-bold text-xs rounded-full px-3 py-1 uppercase text-white w-fit mt-1">
            {{replace status "_" " "}}
          </span>
        </div>
      </div>
    </div>

    {{#if payments.length}}
    <div class="section payment-history mb-8">
      <div class="section-title text-blue-900 font-bold text-xl border-b-2 border-gray-300 pb-2 mb-4">PAYMENT HISTORY</div>
      <div class="overflow-x-auto">
        <table class="items-table w-full border-collapse rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-gray-100 border-b border-gray-300 text-xs font-semibold text-left text-gray-700">
              <th class="py-3 px-4">Date</th>
              <th class="py-3 px-4">Amount</th>
              <th class="py-3 px-4">Method</th>
              <th class="py-3 px-4">Status</th>
            </tr>
          </thead>
          <tbody>
            {{#each payments}}
            <tr class="even:bg-gray-50 hover:bg-gray-100 text-xs border-b border-gray-200">
              <td class="py-2 px-4">{{formatDate paymentDate}}</td>
              <td class="py-2 px-4">₹{{formatCurrency amount}}</td>
              <td class="py-2 px-4">{{replace paymentMethod "_" " "}}</td>
              <td class="py-2 px-4">{{replace status "_" " "}}</td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
    {{/if}}

    {{#if notes}}
    <div class="section mb-8">
      <div class="section-title text-blue-900 font-bold text-xl border-b-2 border-gray-300 pb-2 mb-4">NOTES</div>
      <div class="notes-section bg-gray-50 p-6 rounded-md border-l-4 border-yellow-300 text-gray-700">
        {{notes}}
      </div>
    </div>
    {{/if}}

    <div class="footer mt-10 pt-6 border-t-2 border-gray-300 text-gray-500 text-xs">
      <div class="footer-content flex flex-col md:flex-row justify-between items-center md:items-start gap-4 text-center md:text-left">
        <div>
          <div>Generated on: {{formatDateTime currentDate}}</div>
          <div>Hospital: {{hospital.name}}</div>
          {{#if hospital.address}}
          <div>Address: {{hospital.address}}</div>
          {{/if}}
        </div>
        <div class="signature text-center md:text-right">
          <div class="text-sm text-gray-700">Authorized Signature</div>
          <div class="signature-line border-b border-gray-400 w-[150px] mt-2 mx-auto md:mr-0"></div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>